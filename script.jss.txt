// Nom personnalisÃ©
const params = new URLSearchParams(window.location.search);
const nom = params.get("nom") || "Citoyen ConcernÃ©";
document.getElementById("nom").textContent = nom;

// Compte Ã  rebours
let seconds = 48 * 60 * 60;
function updateCountdown() {
  const h = String(Math.floor(seconds / 3600)).padStart(2, "0");
  const m = String(Math.floor((seconds % 3600) / 60)).padStart(2, "0");
  const s = String(seconds % 60).padStart(2, "0");
  document.getElementById("countdown").textContent = `${h}:${m}:${s}`;
  if (seconds > 0) seconds--;
}
setInterval(updateCountdown, 1000);
updateCountdown();

// SÃ©quence complÃ¨te
function startSequence() {
  const alarm = document.getElementById("alarm");
  alarm.volume = 1;
  alarm.play();

  document.body.innerHTML = `
    <div style="
      height:100vh;
      background:black;
      color:#0f0;
      font-family:monospace;
      display:flex;
      justify-content:center;
      align-items:center;
      font-size:20px;
    ">
      <div id="terminal">Connexion au serveur fÃ©dÃ©ral...</div>
    </div>
  `;

  const lines = [
    "Authentification...",
    "AccÃ¨s autorisÃ©.",
    "TÃ©lÃ©chargement du dossier...",
    "Analyse des donnÃ©es...",
    "âš ï¸ ALERTE SYSTÃˆME âš ï¸"
  ];

  let i = 0;
  const terminal = document.getElementById("terminal");

  const interval = setInterval(() => {
    terminal.innerHTML += "<br>" + lines[i];
    i++;
    if (i === lines.length) {
      clearInterval(interval);
      setTimeout(jumpscare, 800);
    }
  }, 700);
}

// JUMPSCARE
function jumpscare() {
  document.body.innerHTML = `
    <div class="jumpscare">
      <img src="https://i.imgur.com/8Km9tLL.jpg">
    </div>
  `;

  setTimeout(reveal, 900);
}

// RÃ‰VÃ‰LATION
function reveal() {
  document.body.innerHTML = `
    <div style="
      height:100vh;
      background:#000;
      color:#0f0;
      font-family:monospace;
      display:flex;
      justify-content:center;
      align-items:center;
      text-align:center;
      padding:40px;
    ">
      <div>
        <h1>ðŸ˜‚ BLAGUE ! ðŸ˜‚</h1>
        <p>Aucune agence.</p>
        <p>Aucun dossier.</p>
        <p>Juste un Ã©norme troll.</p>
      </div>
    </div>
  `;
}
